<!DOCTYPE html>
<html>
<head>
<title>Operation Zero Hour - Code Alpha</title>
<style>
body{
    background: linear-gradient(black,#111);
    color:#00ff66;
    font-family: Arial, sans-serif;
    padding:20px;
}
h1{
    color:#ffcc00;
}
.box{
    background:#1a1a1a;
    border:2px solid #333;
    padding:15px;
    margin:15px 0;
    border-radius:8px;
}
button{
    background:#333;
    color:#00ff66;
    border:1px solid #00ff66;
    padding:8px 12px;
    margin-top:5px;
    cursor:pointer;
}
button:hover{
    background:#00ff66;
    color:black;
}
input{
    padding:5px;
}
.locked{
    background:#555;
    color:#ccc;
    cursor:not-allowed;
}
</style>
</head>

<body>

<h1>üîê OPERATION ZERO HOUR</h1>

<div class="box">
<h3>Enter Team Name</h3>
<input type="text" id="teamName">
<button onclick="lockTeam()">Confirm</button>
<p id="teamStatus"></p>
</div>

<h2>Remaining HP: <span id="hp">1000</span></h2>

<div class="box">
<h3>Category A ‚Äì Digit Elimination (30 HP)</h3>
<button onclick="buyElimination()">Purchase</button>
<div id="elimResults"></div>
</div>

<div class="box">
<h3>Category B ‚Äì Position Query (25 HP)</h3>
Digit: <input type="number" id="digit" min="0" max="9">
Position (1-5): <input type="number" id="position" min="1" max="5">
<button onclick="checkPosition()">Query</button>
<p id="posResult"></p>
</div>

<div class="box">
<h3>Category C ‚Äì Structural Constraint (150 HP)</h3>
<button onclick="buySum()">Reveal Sum</button>
<p id="sumResult"></p>
</div>

<div class="box">
<h3>Category D ‚Äì Extreme Value Intel (120 HP each)</h3>
<button onclick="buyLargest()">Reveal Largest Position</button>
<button onclick="buySmallest()">Reveal Smallest Position</button>
<p id="extremeResult"></p>
</div>

<div class="box">
<h3>Check Final Code (10 HP)</h3>
<input type="text" id="finalCode" maxlength="5">
<button onclick="checkFinal()">Check</button>
<p id="finalResult"></p>
</div>

<script>

const finalCode = "75183";

let hp = localStorage.getItem("hp") ? parseInt(localStorage.getItem("hp")) : 1000;
let teamLocked = localStorage.getItem("teamLocked") === "true";

let eliminationOrder = [9,4,0,2,6];
let eliminationIndex = localStorage.getItem("elimIndex") ? parseInt(localStorage.getItem("elimIndex")) : 0;

let sumPurchased = localStorage.getItem("sumPurchased") === "true";
let largestPurchased = localStorage.getItem("largestPurchased") === "true";
let smallestPurchased = localStorage.getItem("smallestPurchased") === "true";

window.onload = function(){

    document.getElementById("hp").innerText = hp;

    if(teamLocked){
        let savedName = localStorage.getItem("teamName");
        document.getElementById("teamName").value = savedName;
        document.getElementById("teamName").disabled = true;
        document.querySelector("#teamName + button").disabled = true;
        document.getElementById("teamStatus").innerText = "Team Locked: " + savedName;
    }

    for(let i=0;i<eliminationIndex;i++){
        document.getElementById("elimResults").innerHTML +=
        "<p>Digit NOT in code: " + eliminationOrder[i] + "</p>";
    }

    if(sumPurchased){
        document.getElementById("sumResult").innerText = "Sum of digits = 24";
    }

    if(largestPurchased){
        document.getElementById("extremeResult").innerHTML += "<p>Largest digit is in Position 4</p>";
    }

    if(smallestPurchased){
        document.getElementById("extremeResult").innerHTML += "<p>Smallest digit is in Position 3</p>";
    }
};

function updateHP(cost){
    if(hp >= cost){
        hp -= cost;
        localStorage.setItem("hp", hp);
        document.getElementById("hp").innerText = hp;
        return true;
    } else {
        alert("Not enough HP");
        return false;
    }
}

function lockTeam(){
    let name = document.getElementById("teamName").value;
    if(name.trim() === ""){
        alert("Enter team name");
        return;
    }

    localStorage.setItem("teamName", name);
    localStorage.setItem("teamLocked", "true");

    document.getElementById("teamName").disabled = true;
    document.querySelector("#teamName + button").disabled = true;
    document.getElementById("teamStatus").innerText = "Team Locked: " + name;

    teamLocked = true;
}

function buyElimination(){
    if(!teamLocked){ alert("Lock team name first"); return; }

    if(eliminationIndex >= eliminationOrder.length){
        alert("No more digits available in Category A");
        return;
    }

    if(updateHP(30)){
        document.getElementById("elimResults").innerHTML +=
        "<p>Digit NOT in code: " + eliminationOrder[eliminationIndex] + "</p>";

        eliminationIndex++;
        localStorage.setItem("elimIndex", eliminationIndex);
    }
}

function buySum(){
    if(!teamLocked){ alert("Lock team name first"); return; }

    if(sumPurchased){
        alert("Already purchased");
        return;
    }

    if(updateHP(150)){
        document.getElementById("sumResult").innerText = "Sum of digits = 24";
        localStorage.setItem("sumPurchased", "true");
        sumPurchased = true;
    }
}

function buyLargest(){
    if(!teamLocked){ alert("Lock team name first"); return; }

    if(largestPurchased){
        alert("Largest already revealed");
        return;
    }

    if(updateHP(120)){
        document.getElementById("extremeResult").innerHTML +=
        "<p>Largest digit is in Position 4</p>";
        localStorage.setItem("largestPurchased", "true");
        largestPurchased = true;
    }
}

function buySmallest(){
    if(!teamLocked){ alert("Lock team name first"); return; }

    if(smallestPurchased){
        alert("Smallest already revealed");
        return;
    }

    if(updateHP(120)){
        document.getElementById("extremeResult").innerHTML +=
        "<p>Smallest digit is in Position 3</p>";
        localStorage.setItem("smallestPurchased", "true");
        smallestPurchased = true;
    }
}

function checkPosition(){
    if(!teamLocked){ alert("Lock team name first"); return; }

    let digit = document.getElementById("digit").value;
    let pos = document.getElementById("position").value - 1;

    if(digit === "" || pos < 0 || pos > 4){
        alert("Invalid input");
        return;
    }

    if(updateHP(25)){
        if(finalCode[pos] == digit){
            document.getElementById("posResult").innerText = "YES";
        } else {
            document.getElementById("posResult").innerText = "NO";
        }
    }
}

function checkFinal(){
    if(!teamLocked){ alert("Lock team name first"); return; }

    let code = document.getElementById("finalCode").value;

    if(code.length !== 5){
        alert("Enter 5-digit code");
        return;
    }

    if(updateHP(10)){
        if(code === finalCode){
            document.getElementById("finalResult").innerText = "ACCESS GRANTED";
            sendToSheet();
        } else {
            document.getElementById("finalResult").innerText = "ACCESS DENIED";
        }
    }
}

function sendToSheet(){
    fetch("https://script.google.com/macros/s/AKfycbyo0VYPP1WGT3noBvRyWhnQEp9VTnG9hqJg0-5dR8AeoQAI4IWw9pWLbRZme3T4Tyqd/exec", {
        method: "POST",
        mode: "no-cors",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            team: localStorage.getItem("teamName"),
            hp: hp
        })
    });
}


</script>


</body>
</html>



